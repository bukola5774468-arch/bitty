(self["webpackChunk_canva_web"] = self["webpackChunk_canva_web"] || []).push([[36455],{

/***/ 894240:
function(_, __, __webpack_require__) {__webpack_require__.n_x = __webpack_require__.n;const __web_req__ = __webpack_require__;__web_req__(905716);__web_req__(744054);self._5f74ec40302898c5a55451c9fbd04240 = self._5f74ec40302898c5a55451c9fbd04240 || {};(function(__c) {var gK=__c.gK;var X=__c.X;var K=__c.K;var La=__c.La;var zec,Bec,Aec,Dec,Gec,Fec,Iec,Lec,Oec,Sec,Vec,Yec,Qec,afc,cfc,efc;__c.W4=function(a){return{type:1,Component:a}};__c.X4=function(){return a=>a};__c.Y4=function(a){return()=>({...yec,...a})};zec=function(a,b){return{element:__c.W4(a),exports:b}};
Bec=async function(a,b){const c=b.requestId,d=b.path;b=b.payload;const e=a.requestHandler.get(d);if(e){a.n4.UZ.send({type:"ack",requestId:c});var f=setInterval(()=>a.n4.UZ.send({type:"ack",requestId:c}),9E3);try{var g=await e(b);clearInterval(f);a.n4.UZ.send({type:"response",requestId:c,payload:g})}catch(k){clearInterval(f);g="internal_error";b="Something went wrong on our end, if this issue persists please contact us.";if(k instanceof Z4){var h=k;k.code==="internal_error"?a.I.Gb(k,{Ae:"Internal error in comms handler",
tags:new Map([["type","request"],["path",d]])}):(g=k.code,b=k.ztb)}else a.kub?a.I.Gb(k,{Ae:"Unexpected error type thrown from comms handler",tags:new Map([["type","request"],["path",d]])}):a.Pdb.error(k);g=Aec(a.n4,c,g,b);g.ok||a.I.$M(g.error,{Ae:"unable to send error response",tags:new Map([["type","request"],["path",d]])})}if(h!=null)for(const k of a.Pfb)try{k(h)}catch(l){a.I.vD(l,{Ae:"Error executing errorObserver"})}}else h=Aec(a.n4,c,"internal_error",`No request handler configured for path: "${d}".`),
h.ok||a.I.$M(h.error,{Ae:"unable to send error response",tags:new Map([["type","request"],["path",d]])})};Aec=function(a,b,c,d){return a.UZ.send({type:"error",requestId:b,code:c,message:d})};Dec=function({src:a,srcdoc:b,sandbox:c}){if(b.length!==0||!c.contains("allow-same-origin"))return Cec;a=(new URL(a)).origin;return a==="null"?Cec:{dFa:a,d0a:a}};
Gec=async function(a,b,c,{addEventListener:d,removeEventListener:e}=window){const f=new Eec(6E4),g=Dec(c),h=c.contentWindow;if(!h)throw new Z4({code:"internal_error",message:"contentWindow is missing from iFrame"});c=({data:k,source:l,origin:m})=>{var n;(k===null||k===void 0?0:(n=k.source)===null||n===void 0?0:n.startsWith("react-"))||(m!==g.dFa?Fec(m)||b.info("received message event from an unexpected origin",{extra:new Map([["expected",g.dFa],["actual",m]])}):l!==h?l!==window&&b.info("source and content window do not match",
{extra:new Map([["data.source",k===null||k===void 0?void 0:k.source]])}):(l=k?k.source?k.source!=="iframe"?La("invalid source"):(0,__c.Ka)():La("'source' is missing in MessageEvent data object"):La("missing 'data' field in MessageEvent"),l.ok?(h.postMessage({source:"parent"},g.d0a,[a]),f.resolve(void 0)):b.OL(l.error,{extra:new Map([["data.source",k===null||k===void 0?void 0:k.source]])})))};d("message",c);try{await f.promise()}finally{e("message",c)}};Fec=function(a){return Hec.some(b=>a.endsWith(b))};
Iec=function(a,b,c,d){a.handle("SET_CONFIG",async e=>{if(e===void 0)throw new Z4({code:"internal_error",message:"SET_CONFIG: request cannot be undefined."});e=b.Va(e);e=await c(e);if(d)return d.gb(e)})};Lec=async function(a,b){a=await a.baa.request("RENDER_EDIT_PANEL",Jec.gb(b));if(!a.ok)throw Error(`Encountered an error while sending ${"RENDER_EDIT_PANEL"} request: ${a.error}`);if(a.value==null)throw Error("RENDER_EDIT_PANEL: Result cannot be empty");return Kec.Va(a.value)};
Oec=function(a,b){Iec(a,Mec,c=>b.gta(c),Nec)};Sec=async function(a,b){a=await a.baa.request("RENDER_ELEMENT",Pec.gb(b));a=Qec(a,"RENDER_ELEMENT");return Rec.Va(a)};Vec=async function(a,b){a=await a.baa.request("SET_CAPABILITY",Tec.gb(b));a=Qec(a,"SET_CAPABILITY");return Uec.Va(a)};Yec=function(a,b){Iec(a,Wec,c=>b.gta(c),Xec)};Qec=function(a,b){if(!a.ok)throw Error(`Encountered an error while sending ${b} request: ${a.error}`);if(a.value==null)throw Error(`${b}: Result cannot be empty`);return a.value};
afc=async function(a,b,c){const {port1:d,port2:e}=new MessageChannel,f=new Zec(d,b);await Gec(e,b,a,window);a=new $ec(f);c&&Yec(f,c);return a};cfc=async function(a,b,c){const {port1:d,port2:e}=new MessageChannel,f=new Zec(d,b);await Gec(e,b,a,window);a=new bfc(f);Oec(f,c);return a};efc=async function(a,b){if(a.DI)try{return(await a.DI.qKb(new dfc({id:b,akb:!0}))).url}catch(c){a.I.Gb(c)}};__c.ud.prototype.$M=__c.ia(3,function(a,b){this.console.error(...__c.td(this,"critical",a,b))});
__c.FJ.prototype.$M=__c.ia(2,function(a,b){this.du.$M(a,b);__c.DJ(this,a,"critical",b)});var ffc=__webpack_require__(400770).reaction;var gfc=__webpack_require__(31968).jsx;var hfc=__webpack_require__(845212),ifc=hfc.useEffect,jfc=hfc.useState;var yec=Object.freeze({document:Object.freeze({}),element:Object.freeze({})});var kfc=__c.Y4({element:__c.SZ({Yna:(0,__c.XZ)("blueprintId"),F5a:(0,__c.XZ)("variantId"),type:(0,__c.u_b)("type","source","instance"),domain:(0,__c.u_b)("domain","document","brand")})}),lfc=__c.X4()(({imports:{Wna:a}})=>({element:{type:0,lB:({element:b})=>{const c=a.Cgb(b.Yna);if(!c)throw Error(`Blueprint ${b.Yna} not found`);const d=c.variants.get(b.F5a);if(!d)throw Error(`Variant ${b.F5a} not found for blueprint ${b.Yna}`);return b.type==="source"?{Ka:d.elements}:{Ka:new __c.UZ(()=>d.elements.map(e=>
{e=__c.qI.ba(e);return __c.JH.create({...e,locked:!0,Hh:!0,mi:d.mi})}))}}},exports:{}}));var mfc=__c.Y4({element:__c.SZ({LKa:(0,__c.t_b)("i"),config:(0,__c.ZZ)("c")})});var nfc=class{};var Z4=class extends Error{constructor(a){a.code=a.code;const b=a.message.endsWith(".")?"":".";super(`[${a.code}]:  ${a.message}${b}`.trim());this.code=a.code;this.name="CanvaError";this.ztb=a.message;Object.setPrototypeOf(this,Z4.prototype)}};var ofc=class{constructor(a,b,c){this.handler=a;this.port=b;this.I=c;this.send=d=>{try{return this.port.postMessage(d),(0,__c.Ka)()}catch(e){return this.I.Gb(e),La(e)}};this.Qqb=d=>{this.I.Gb(d)};this.Xwa=({data:d})=>{if(d)try{this.handler.Etb(d)}catch(e){this.I.Gb(e)}else this.I.error(new Z4({code:"internal_error",message:"missing data in 'MessageEvent'"}))};this.port.onmessage=this.Xwa;this.port.onmessageerror=this.Qqb}};var pfc=class extends Error{constructor(){super("[internal_error] Comms promise timed out.")}},Eec=class{reset(a){a&&(this.timeoutMs=a);this.setTimeout()}resolve(a){clearTimeout(this.Sd);this.vub(a)}reject(a){clearTimeout(this.Sd);this.EZa(a)}promise(){return this.p}setTimeout(){clearTimeout(this.Sd);this.Sd=setTimeout(()=>{this.EZa(new pfc)},this.timeoutMs)}constructor(a){this.timeoutMs=a;this.p=new Promise((b,c)=>{this.vub=b;this.EZa=c});this.setTimeout()}};var qfc=class{request(a,b){const c=this.hYa,d=new Eec(5E3),e=this.mub(),f=async function(){c.set(e,d);try{const g=await d.promise();return(0,__c.Ka)(g)}catch(g){return g instanceof pfc?La(new Z4({code:"internal_error",message:`Comms promise timed out (${a}).`})):La(g)}finally{c.delete(e)}}();b=this.send(e,a,b);b.ok||(this.I.Gb(b.error,{Ae:"unable to send request",tags:new Map([["type","request"],["path",a]])}),d.reject(b.error));return f}constructor(a,b){this.send=a;this.I=b;this.mub=__c.hp;this.hYa=
new Map}};var rfc=class{handle(a,b){if(this.requestHandler.has(a))throw new Z4({code:"internal_error",message:`Handler for '${a}' is already defined.`});this.requestHandler.set(a,b)}constructor(a,b){var c=console;this.n4=a;this.I=b;this.kub=!0;this.Pdb=c;this.requestHandler=new Map;this.Pfb=new Set}};var Zec=class{constructor(a,b){this.request=(c,d)=>this.client.request(c,d);this.handle=(c,d)=>this.requestHandler.handle(c,d);a=new sfc(c=>{switch(c.type){case "ack":case "error":case "response":var d=this.client;const e=c.requestId,f=c.type,g=d.hYa.get(e);if(g)switch(f){case "response":g.resolve(c.payload);break;case "ack":g.reset(2E4);break;case "error":g.reject(new Z4({code:c.code,message:c.message}));break;default:throw new __c.E(c);}else f!=="ack"&&d.I.error("request has already been handled and resolved or was not sent from this client",
{tags:new Map([["type",f],["requestId",`${e}`]])});break;case "request":Bec(this.requestHandler,c);break;default:throw new __c.E(c);}},a,b.Rf("bus"));this.client=new qfc(a.Tz,b.Rf("client"));this.requestHandler=new rfc(a,b.Rf("requestHandler"))}},sfc=class{constructor(a,b,c){this.Wca=a;this.Tz=(d,e,f)=>this.UZ.send({type:"request",requestId:d,path:e,payload:f});this.brb=d=>{switch(d.type){case "ack":this.Wca({type:"ack",requestId:d.requestId});break;case "error":this.Wca({type:"error",requestId:d.requestId,
code:d.code,message:d.message});break;case "response":this.Wca({type:"response",requestId:d.requestId,payload:d.payload});break;case "request":this.Wca({type:"request",requestId:d.requestId,path:d.path,payload:d.payload});break;default:throw new __c.E(d);}};this.UZ=new ofc({Etb:this.brb},b,c)}};var Cec={dFa:"null",d0a:"*"};var Hec="canva-dev.com canva-dev.cn canva-staging.com canva-staging.cn canva.com canva.cn canva-apps.com canva-apps.cn canva-apps-dev.com canva-apps-dev.cn canva-apps-staging.com canva-apps-staging.cn".split(" ");var Jec=K(()=>({config:__c.Y(1)}));var Kec=K(()=>({}));var Mec=K(()=>({config:X(1)}));var Nec=K(()=>({}));var bfc=class{constructor(a){this.baa=a}};var Pec=K(()=>({config:__c.Y(1)}));var $4=K(()=>({type:__c.F("A?",1,"RECOLORABLE"),id:X(1),value:X(2)}));var tfc=K(()=>({borderRadius:gK(1),borderWidth:gK(2)}));var a5=K(()=>({type:__c.F("A?",2,"BORDERABLE"),id:X(1),value:__c.Va(2,tfc)}));var Rec=K(()=>({config:X(1),width:gK(2),height:gK(3),BW:__c.Wa(4,$4),aab:__c.Wa(5,a5)}));var Tec=__c.mb(()=>({type:[1,$4,2,a5]}),()=>({}));var Uec=K(()=>({config:X(1),width:gK(2),height:gK(3)}));var Wec=K(()=>({config:X(1),width:gK(2),height:gK(3),BW:__c.Wa(4,$4),aab:__c.Wa(5,a5)}));var Xec=K(()=>({}));var $ec=class{constructor(a){this.baa=a}};var ufc=class{async fz(a,b){const c=await cfc(a,this.I,{gta:e=>{var f;(f=this.config.iba)===null||f===void 0||f.MEa(e,b);return new Nec}}),d=ffc(()=>b.config,async e=>Lec(c,{config:e}));this.vg.set(a,d);await Lec(c,{config:b.config})}nP(a){var b;(b=this.vg.get(a))===null||b===void 0||b();this.vg.delete(a)}constructor(a,b){this.config=a;this.I=b;this.vg=new Map}};var dfc=K(()=>({id:X("id",1),pLb:__c.pK("includeEmbed",2),qLb:__c.pK("includeFavicon",3),akb:__c.pK("includeFileUrls",4),rLb:__c.pK("includeFileEmbedHtml",5),zj:__c.Y("documentId",21),g0:__c.Y("documentExtension",22)}));var vfc=class{async fz(a,b){var c;const d=g=>Vec(f,new $4(g)),e=this.config.iba;e&&(c={gta:g=>{e.MEa(g,b,d);return new Xec}});const f=await afc(a,this.I,c);c=ffc(()=>b.config,async g=>{const h=await Sec(f,{config:g});h.config&&h.config!==g&&(e===null||e===void 0||e.MEa(h,b,d))});this.vg.set(a,c);a=await Sec(f,{config:b.config});e===null||e===void 0||e.MEa(a,b,d)}nP(a){var b;(b=this.vg.get(a))===null||b===void 0||b();this.vg.delete(a)}constructor(a,b,c){this.config=a;this.DI=b;this.I=c;this.vg=new Map}};var wfc=__c.X4()(({dh:a,imports:b})=>{a=a.I;const c=new nfc,d=new vfc(c,b.DI,a);return zec(({data:{element:e},Em:{J7a:f,$7a:g}})=>{const [h,k]=jfc(void 0);ifc(()=>{efc(d,e.LKa).then(l=>k(l))},[e.LKa]);return h?gfc(f,{url:h,fz:l=>d.fz(l,e),nP:l=>d.nP(l)}):gfc(g,{})},{config:c,pHb:new ufc(c,a)})});__c.$Wa={Lkb:function(a){function b({imports:h,Qz:k,Xg:l,C7:m="default"}){const n=k.id;k=k.ht;h=d.Hkb(n,k,l({dh:{...f,Za:e.vu(`widgets.rendering.clients.${m}`),Wa:f.Wa},imports:h}));return{id:n,ht:k,LQb:h,C7:m}}const c=a.CAb,d=a.u8,e=a.rf,f=a.dh,g=a.imports;return{LJa:b({imports:{Wna:g.Wna},Qz:c.LJa,Xg:lfc,C7:"blueprint"}),yqa:c.yqa?Promise.all([c.yqa,__webpack_require__.me(270376).then(()=>__c.xfc),__webpack_require__.me(309241).then(()=>__c.yfc),__webpack_require__.me(726606).then(()=>__c.zfc),
__webpack_require__.me(555219).then(()=>__c.Afc),__webpack_require__.me(756388).then(()=>__c.Bfc),__webpack_require__.me(516583).then(()=>__c.Cfc),__webpack_require__.me(93698).then(()=>__c.Dfc)]).then(([h,k,l,m,n,p,q,r])=>({IMa:b({imports:void 0,Qz:h.IMa,Xg:k.Xg}),JMa:b({imports:void 0,Qz:h.JMa,Xg:l.Xg}),KMa:b({imports:void 0,Qz:h.KMa,Xg:m.Xg}),LMa:b({imports:void 0,Qz:h.LMa,Xg:n.Xg}),MMa:b({imports:void 0,Qz:h.MMa,Xg:p.Xg}),NMa:b({imports:void 0,Qz:h.NMa,Xg:q.Xg}),OMa:b({imports:void 0,Qz:h.OMa,
Xg:r.Xg})})):void 0,KKa:b({imports:{DI:g.DI},Qz:c.KKa,Xg:wfc,C7:"codelet"}),form:c.form?Promise.all([c.form,__webpack_require__.me(313335).then(()=>__c.Efc)]).then(([h,k])=>b({imports:{msa:g.msa},Qz:h,Xg:k.Xg,C7:"form"})):void 0,scene:c.scene?Promise.all([c.scene,__webpack_require__.me(416029).then(()=>__c.Ffc)]).then(([h,k])=>b({imports:void 0,Qz:h,Xg:k.Xg,C7:"scene"})):void 0}},Mkb:function(a){function b(e,f){f=c.Ikb(e,f());return{id:e,ht:f}}const c=a.MFa,d=__c.Fq("c79472f0",!1);return{LJa:b("w:wnJF5T87v",
kfc),yqa:a.$eb?Promise.all([__webpack_require__.me(270376).then(()=>__c.xfc),__webpack_require__.me(309241).then(()=>__c.yfc),__webpack_require__.me(726606).then(()=>__c.zfc),__webpack_require__.me(555219).then(()=>__c.Afc),__webpack_require__.me(756388).then(()=>__c.Bfc),__webpack_require__.me(516583).then(()=>__c.Cfc),__webpack_require__.me(93698).then(()=>__c.Dfc)]).then(([e,f,g,h,k,l,m])=>({IMa:b("w:cm9wgGptP",e.Tn),JMa:b("w:yLMS4dWnl",f.Tn),KMa:b("w:2flp30CGQ",g.Tn),LMa:b("w:1Nv6K6Dtv",h.Tn),
MMa:b("w:5Nv6K6Dtv",k.Tn),NMa:b("w:6Nv6K6Dtv",l.Tn),OMa:b("w:7Nv6K6Dtv",m.Tn)})):void 0,KKa:b("w:JR4G8hDDg",mfc),form:d?__webpack_require__.me(313335).then(()=>__c.Efc).then(e=>b("widget:form",e.Tn)):void 0,scene:a.vfb?__webpack_require__.me(416029).then(()=>__c.Ffc).then(e=>b("w:2pbXJMtm1",e.Tn)):void 0}}};
}).call(self, self._5f74ec40302898c5a55451c9fbd04240);}

}])
//# sourceMappingURL=sourcemaps/cc8ce936496c427d.js.map